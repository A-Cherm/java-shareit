{"openapi":"3.0.1","info":{"title":"Share-it Api","description":"Сервис для аренды вещей"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"Запросы предметов","description":"Управление запросами"},{"name":"Пользователи","description":"Управление пользователями"},{"name":"Бронирования предметов","description":"Управление бронированиями"},{"name":"Предметы","description":"Управление предметами"}],"paths":{"/users":{"post":{"tags":["Пользователи"],"summary":"Создание пользователя","operationId":"addUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDto"}}},"required":true},"responses":{"200":{"description":"ОК","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"400":{"description":"Некорректные данные запроса"}}}},"/requests":{"get":{"tags":["Запросы предметов"],"summary":"Получение запросов пользователя","operationId":"getUserRequests","parameters":[{"name":"X-Sharer-User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"ОК","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ItemRequestDto"}}}}},"400":{"description":"Некорректные данные запроса"},"404":{"description":"Нет пользователя с данным id"}}},"post":{"tags":["Запросы предметов"],"summary":"Добавление запроса","operationId":"addRequest","parameters":[{"name":"X-Sharer-User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ItemRequestDto"}}},"required":true},"responses":{"200":{"description":"ОК","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ItemRequestDto"}}}},"400":{"description":"Некорректные данные запроса"},"404":{"description":"Нет пользователя с данным id"}}}},"/items":{"get":{"tags":["Предметы"],"summary":"Получение предметов пользователя","operationId":"getUserItems","parameters":[{"name":"X-Sharer-User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"ОК","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ItemDto"}}}}},"400":{"description":"Данные бронирования доступны только автору или владельцу вещи"},"404":{"description":"Нет бронирования с данным id"}}},"post":{"tags":["Предметы"],"summary":"Создание предмета","operationId":"createItem","parameters":[{"name":"X-Sharer-User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ItemDto"}}},"required":true},"responses":{"200":{"description":"ОК","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ItemDto"}}}},"400":{"description":"Некорректные данные запроса"}}}},"/items/{itemId}/comment":{"post":{"tags":["Предметы"],"summary":"Добавить комментарий к предмету","operationId":"addComment","parameters":[{"name":"X-Sharer-User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"itemId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CommentDto"}}},"required":true},"responses":{"200":{"description":"ОК","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CommentDto"}}}},"400":{"description":"Некорректные данные запроса"},"404":{"description":"Нет предмета с данным id"}}}},"/bookings":{"get":{"tags":["Бронирования предметов"],"summary":"Получение бронирований пользователя","operationId":"getUserBookings","parameters":[{"name":"X-Sharer-User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"state","in":"query","description":"Статус бронирования","required":false,"schema":{"type":"string","default":"all"}},{"name":"from","in":"query","required":false,"schema":{"minimum":0,"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","required":false,"schema":{"type":"integer","format":"int32","default":10}}],"responses":{"200":{"description":"ОК","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BookingDto"}}}}},"400":{"description":"Некорректные данные запроса"},"404":{"description":"Нет пользователя с данным id"}}},"post":{"tags":["Бронирования предметов"],"summary":"Создание бронирования","operationId":"addBooking","parameters":[{"name":"X-Sharer-User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookingDto"}}},"required":true},"responses":{"200":{"description":"ОК","content":{"*/*":{"schema":{"$ref":"#/components/schemas/BookingDto"}}}},"400":{"description":"Некорректные данные запроса"}}}},"/users/{id}":{"get":{"tags":["Пользователи"],"summary":"Получение пользователя","operationId":"getUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"ОК","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"400":{"description":"Некорректные данные запроса"},"404":{"description":"Нет пользователя с данным id"}}},"delete":{"tags":["Пользователи"],"summary":"Удаление пользователя","operationId":"deleteUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"ОК"},"400":{"description":"Некорректные данные запроса"},"404":{"description":"Нет пользователя с данным id"}}},"patch":{"tags":["Пользователи"],"summary":"Обновление пользователя","operationId":"updateUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdateDto"}}},"required":true},"responses":{"200":{"description":"ОК","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"400":{"description":"Некорректные данные запроса"},"404":{"description":"Нет пользователя с данным id"}}}},"/items/{itemId}":{"get":{"tags":["Предметы"],"summary":"Получение предмета","operationId":"getItem","parameters":[{"name":"X-Sharer-User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"itemId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"ОК","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ItemDto"}}}},"400":{"description":"Некорректные данные запроса"},"404":{"description":"Нет пользователя с данным id"}}},"patch":{"tags":["Предметы"],"summary":"Обновление предмета","operationId":"updateItem","parameters":[{"name":"X-Sharer-User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"itemId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ItemUpdateDto"}}},"required":true},"responses":{"200":{"description":"ОК","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ItemDto"}}}},"400":{"description":"Некорректные данные запроса"},"404":{"description":"Нет предмета с данным id"}}}},"/bookings/{bookingId}":{"get":{"tags":["Бронирования предметов"],"summary":"Получение бронирования","operationId":"getBooking","parameters":[{"name":"X-Sharer-User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"bookingId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"ОК","content":{"*/*":{"schema":{"$ref":"#/components/schemas/BookingDto"}}}},"400":{"description":"Данные бронирования доступны только автору или владельцу вещи"},"404":{"description":"Нет бронирования с данным id"}}},"patch":{"tags":["Бронирования предметов"],"summary":"Обновление бронирования","operationId":"updateBooking","parameters":[{"name":"X-Sharer-User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"bookingId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"approved","in":"query","required":true,"schema":{"type":"boolean"}}],"responses":{"200":{"description":"ОК","content":{"*/*":{"schema":{"$ref":"#/components/schemas/BookingDto"}}}},"400":{"description":"Некорректные данные запроса"},"404":{"description":"Нет бронирования с данным id"},"409":{"description":"Статус может менять только владелец вещи"}}}},"/requests/{requestId}":{"get":{"tags":["Запросы предметов"],"summary":"Получение запроса","operationId":"getRequest","parameters":[{"name":"X-Sharer-User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"requestId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"ОК","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ItemRequestDto"}}}},"400":{"description":"Некорректные данные запроса"},"404":{"description":"Нет пользователя с данным id"}}}},"/requests/all":{"get":{"tags":["Запросы предметов"],"summary":"Получение всех запросов","operationId":"getAllRequests","parameters":[{"name":"X-Sharer-User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"ОК","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ItemRequestDto"}}}}},"400":{"description":"Некорректные данные запроса"},"404":{"description":"Нет пользователя с данным id"}}}},"/items/search":{"get":{"tags":["Предметы"],"summary":"Поиск предмета по строке в названии или описании","operationId":"searchItems","parameters":[{"name":"X-Sharer-User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"text","in":"query","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"ОК","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ItemDto"}}}}},"400":{"description":"Некорректные данные запроса"},"404":{"description":"Нет предмета с данным id"}}}},"/bookings/owner":{"get":{"tags":["Бронирования предметов"],"summary":"Получение бронирований для вещей пользователя","operationId":"getBookingsForItems","parameters":[{"name":"X-Sharer-User-Id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"state","in":"query","description":"Статус бронирования","required":false,"schema":{"type":"string","default":"all"}}],"responses":{"200":{"description":"ОК","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/BookingDto"}}}}},"400":{"description":"Некорректные данные запроса"},"404":{"description":"Нет пользователя с данным id"}}}}},"components":{"schemas":{"UserDto":{"required":["email","name"],"type":"object","properties":{"name":{"type":"string","description":"Имя пользователя","example":"Вася"},"email":{"type":"string","description":"Почта пользователя","example":"vasya@mail.com"}},"description":"Сущность пользователя"},"ItemRequestDto":{"required":["description"],"type":"object","properties":{"description":{"type":"string","description":"Описание запрашиваемого предмета","example":"Хочу золотой молоток"}},"description":"Запрос предмета"},"ItemDto":{"required":["available","description","name"],"type":"object","properties":{"name":{"type":"string","description":"Название предмета","example":"Молоток"},"description":{"type":"string","description":"Описание предмета","example":"Просто молоток"},"available":{"type":"boolean","description":"Доступность предмета","example":true},"requestId":{"type":"integer","description":"Id запроса на данную вещь","format":"int64","example":1}},"description":"Сущность предмета"},"CommentDto":{"required":["text"],"type":"object","properties":{"authorName":{"type":"string","description":"Id автора","example":"1"},"text":{"type":"string","description":"Текст комментария","example":"Лучший молоток на свете"},"created":{"type":"string","description":"Дата создания","example":"2001-01-01T00:00:00"}},"description":"Комментарий к предмету"},"BookingDto":{"required":["end","itemId","start"],"type":"object","properties":{"itemId":{"type":"integer","description":"Id вещи","format":"int64","example":1},"start":{"type":"string","description":"Дата начала брони","example":"2000-01-01T00:00:00"},"end":{"type":"string","description":"Дата конца брони","example":"2001-01-01T00:00:00"}},"description":"Сущность бронирования"},"UserUpdateDto":{"type":"object","properties":{"name":{"type":"string","description":"Имя пользователя","example":"Вася"},"email":{"type":"string","description":"Почта пользователя","example":"vasya@mail.com"}},"description":"Обновление пользователя"},"ItemUpdateDto":{"type":"object","properties":{"name":{"type":"string","description":"Название предмета","example":"Молоток"},"description":{"type":"string","description":"Описание предмета","example":"Просто молоток"},"available":{"type":"boolean","description":"Доступность предмета","example":true}},"description":"Обновление предмета"}}}}